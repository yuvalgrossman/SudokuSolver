<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="sudoku.css">
    <title>Sudoku Board</title>
    <style>
        table, tr, td {
          border: 1px solid black;
          border-collapse: collapse;
        }
        .thick-border {
          border-width: 2px;
        }
    </style>
  </head>
  <body>
  <center>
    <table>
    <script>
    for(var i = 0; i < 9; i++) {
        document.write("<tr>");
        for(var j = 0; j < 9; j++) {
            var classes = "";
            if(j % 3 == 0) {
                classes += " thick-border-left";
            }
            if(j == 8) {
                classes += " thick-border-right";
            }
            if(i % 3 == 0) {
                classes += " thick-border-top";
            }
            if(i == 8) {
                classes += " thick-border-bottom";
            }
            document.write("<td class='" + classes + "'><input type='text' id='cell_" + i + "_" + j + "' size='2'></td>");

        }
        document.write("</tr>");
    }
    </script>
    </table>
  <button onclick="submit()">Submit</button>
  </center>
  <script>
    function submit() {
    var data = [];
    for(var i = 0; i < 9; i++) {
        var row = [];
        for(var j = 0; j < 9; j++) {
            var cell = document.getElementById("cell_" + i + "_" + j);
            if(cell.value.length == 0) {
                row.push(null);
            } else {
                row.push(parseInt(cell.value));
            }
        }
        data.push(row);
    }
    // document.write(data)
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "http://localhost:5000/solve", true);
    xhr.setRequestHeader("Content-Type", "application/json");
    xhr.onreadystatechange = function() {
        if (xhr.readyState === 4 && xhr.status === 200) {
            var response = JSON.parse(xhr.responseText);
            console.log(response);
        }
    };
    xhr.send(JSON.stringify({data: data}));
    xhr.onreadystatechange = function() {
        if (xhr.readyState === 4 && xhr.status === 200) {
            var response = JSON.parse(xhr.responseText);
            for(var i = 0; i < 9; i++) {
                for(var j = 0; j < 9; j++) {
                    var cell = document.getElementById("cell_" + i + "_" + j);
                    cell.value = response.solution[i][j];
                }
            }
        }
    };
    }

  </script>
  </body>
</html>


